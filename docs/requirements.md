# Требования к проекту (Gaze Tracker)

| ID | Тип | Требование | Приоритет | Проверка |
|---:|:---:|---|:---:|---|
| F1 | Функц. | Захват кадра с веб‑камеры пользователя и отправка на бэкенд. | MUST | В браузере есть видео; запросы на `/api/predict` идут с частотой ~8 FPS. |
| F2 | Функц. | Детект лица + 5 ориентиров (глаза/нос/рот) с помощью **предобученной нейросети**. | MUST | В ответе `/api/predict` заполняются `face.bbox`, `face.landmarks`. |
| F3 | Функц. | Best‑effort оценка направления взгляда без обучения на собственном датасете (пупил‑центр + эвристики). | MUST | В `/api/predict` заполняется `gaze_dir` при наличии зрачков. |
| F4 | Функц. | Персональная калибровка (9 точек, burst кадров на точку) для преобразования признаков → координаты экрана. | SHOULD | `POST /api/calibration/capture` + `POST /api/calibration/fit` переводят `calibrated=true`. |
| F5 | Функц. | Визуализация: **стрелка** направления до калибровки и **точка** на «экране» после калибровки. | MUST | В Web UI видно стрелку/точку; `screen` в JSON появляется после калибровки. |
| F6 | Функц. | API: predict + endpoints калибровки + healthcheck. | MUST | `/api/health`, `/api/predict`, `/api/calibration/*` отвечают 200 и валидный JSON. |
| N1 | Нефункц. | Локальная работа (без внешнего сервера), данные камеры не отправляются в интернет. | MUST | Приложение доступно на `127.0.0.1`; трафик только на localhost. |
| N2 | Нефункц. | Производительность «псевдо‑реалтайм» (порядка 5–10 FPS на обычном ПК). | SHOULD | В UI обновления происходят без заметных зависаний. |
| N3 | Нефункц. | Простота запуска: одна команда запуска API + UI, без `.bat/.ps1`. | MUST | `python -m gaze_tracker` запускает сервис. |
| N4 | Нефункц. | Минимальный стек и зависимости: Python + FastAPI + OpenCV + NumPy. | SHOULD | `pip install -r requirements.txt` ставит всё нужное. |
| C1 | Огранич. | Использовать **любую предобученную** модель (YOLO допустим) — выбрано: OpenCV YuNet (ONNX). | MUST | Модель скачивается/кешируется, детекция работает. |
| C2 | Огранич. | Архитектура «нормальная»: API‑first + UI для демонстрации и отладки. | MUST | Web UI использует API и показывает JSON/оверлеи. |
